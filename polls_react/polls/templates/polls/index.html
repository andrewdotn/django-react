{% load static %}

{% load argonauts %}

<h1>New style</h1>

<div id=pollsContent></div>

<script src="{% static 'react.js' %}"></script>
<script src="{% static 'react-dom.js' %}"></script>
<script src="{% static 'browser.min.js' %}"></script>
<script src="{% static 'jquery.min.js' %}"></script>
<script type="text/babel">
    var pollsData = {{ polls_data|json }};

    var Question = React.createClass({
        render: function() {
            return (<li>{ this.props.data.question_text }</li>);
        }
    });

    var PollBox = React.createClass({
        render: function() {
            var questionNodes = this.props.data.map(function(question) {
                return (<Question data={question}/>);
            });
            return (
                    <ul>{ questionNodes }</ul>
            );
        }
    });

    ReactDOM.render(
            <PollBox data={pollsData}/>,
            document.getElementById('pollsContent')
    );
</script>

<h1>Old style</h1>

{% if latest_question_list %}
    <ul>
    {% for question in latest_question_list %}
        <li><a href="{% url 'polls:detail' question.id %}"
            >{{ question.question_text }}</a></li>
    {% endfor %}
    </ul>
{% else %}
    <p>No polls are available.</p>
{% endif %}
